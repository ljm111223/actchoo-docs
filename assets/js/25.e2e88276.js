(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{510:function(v,_,t){"use strict";t.r(_);var s=t(4),r=Object(s.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"tcp的握手"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tcp的握手"}},[v._v("#")]),v._v(" TCP的握手")]),v._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#三次握手-建立连接"}},[v._v("三次握手：建立连接")]),t("ul",[t("li",[t("a",{attrs:{href:"#syn-报文与-ack-报文"}},[v._v("SYN 报文与 ACK 报文")])]),t("li",[t("a",{attrs:{href:"#流程"}},[v._v("流程")])])])]),t("li",[t("a",{attrs:{href:"#四次挥手-断开链接"}},[v._v("四次挥手：断开链接")]),t("ul",[t("li",[t("a",{attrs:{href:"#fin-报文"}},[v._v("FIN 报文")])]),t("li",[t("a",{attrs:{href:"#流程"}},[v._v("流程")])])])])])]),t("p"),v._v(" "),t("p",[v._v("TCP的握手三次握手：建立连接SYN 报文与 ACK 报文流程四次挥手：断开链接FIN 报文流程")]),v._v(" "),t("h2",{attrs:{id:"三次握手-建立连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三次握手-建立连接"}},[v._v("#")]),v._v(" 三次握手：建立连接")]),v._v(" "),t("p",[v._v("参与的主题是"),t("strong",[v._v("客户端")]),v._v("和"),t("strong",[v._v("服务器")])]),v._v(" "),t("p",[v._v("![img](file:///Users/jiangmingliu/Library/Mobile%20Documents/com~apple~CloudDocs/atchooDocs/docs/docs/public/Untitled-4457962.png?lastModify=1604458143)")]),v._v(" "),t("h3",{attrs:{id:"syn-报文与-ack-报文"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#syn-报文与-ack-报文"}},[v._v("#")]),v._v(" SYN 报文与 ACK 报文")]),v._v(" "),t("h4",{attrs:{id:"syn-报文"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#syn-报文"}},[v._v("#")]),v._v(" SYN 报文")]),v._v(" "),t("p",[v._v("起"),t("strong",[v._v("标识作用")]),v._v("的家伙")]),v._v(" "),t("ol",[t("li",[v._v("当 "),t("strong",[v._v("SYN=1")]),v._v(" 而 "),t("strong",[v._v("ACK=0")]),v._v(" 时，表明这是一个"),t("strong",[v._v("连接请求报文")]),v._v("。")]),v._v(" "),t("li",[v._v("对方若同意建立连接，则应在"),t("strong",[v._v("响应报文")]),v._v("中使 "),t("strong",[v._v("SYN=1")]),v._v(" 和 "),t("strong",[v._v("ACK=1")]),v._v(" 。")])]),v._v(" "),t("p",[v._v("因此, "),t("strong",[v._v("SYN 置 1 就表示这是一个连接请求或连接接受报文")]),v._v("。")]),v._v(" "),t("h4",{attrs:{id:"ack-报文"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ack-报文"}},[v._v("#")]),v._v(" ACK 报文")]),v._v(" "),t("p",[v._v("TCP 协议规定，只有 "),t("strong",[v._v("ACK=1")]),v._v(" 时有效，也规定"),t("strong",[v._v("连接建立后所有发送的报文的 ACK 必须为 1")]),v._v("。")]),v._v(" "),t("h3",{attrs:{id:"流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#流程"}},[v._v("#")]),v._v(" 流程")]),v._v(" "),t("ol",[t("li",[t("strong",[v._v("由客户端发出请求连接")]),v._v("，报文情况是： "),t("strong",[v._v("SYN=1")]),v._v("，"),t("strong",[v._v("ACK=0")]),v._v("，"),t("strong",[v._v("seq=x")]),v._v("。按照规定，SYN=1 时不能携带数据，但要消耗一个序号，所以和 SYN 一起抵达战场的还有一个"),t("strong",[v._v("记录序号的 seq，其值为 x")]),v._v("。")]),v._v(" "),t("li",[v._v("然后"),t("strong",[v._v("服务端进行回复确认")]),v._v("，报文内容是："),t("strong",[v._v("SYN=1")]),v._v("，"),t("strong",[v._v("ACK=1")]),v._v("，同时还有"),t("strong",[v._v("服务端为自己初始化的序号")]),v._v(" "),t("strong",[v._v("seq=y")]),v._v(",  以及"),t("strong",[v._v("确认号 ack=x+1")])]),v._v(" "),t("li",[v._v("再然后"),t("strong",[v._v("客户端再进行一次确认")]),v._v("，这一步用不到 SYN 了，报文内容是："),t("strong",[v._v("ACK=1")]),v._v(", "),t("strong",[v._v("seq=x+1")]),v._v(", "),t("strong",[v._v("ack=y+1")]),v._v("。")])]),v._v(" "),t("h2",{attrs:{id:"四次挥手-断开链接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四次挥手-断开链接"}},[v._v("#")]),v._v(" 四次挥手：断开链接")]),v._v(" "),t("p",[v._v("参与的主体依然是"),t("strong",[v._v("客户端")]),v._v("和"),t("strong",[v._v("服务器")])]),v._v(" "),t("p",[v._v("![img](file:///Users/jiangmingliu/Library/Mobile%20Documents/com~apple~CloudDocs/atchooDocs/docs/docs/public/Untitled-4457993.png?lastModify=1604458143)")]),v._v(" "),t("h3",{attrs:{id:"fin-报文"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fin-报文"}},[v._v("#")]),v._v(" FIN 报文")]),v._v(" "),t("p",[v._v("新的报文类型就是 "),t("strong",[v._v("FIN 报文")]),v._v("，它用来"),t("strong",[v._v("释放一个连接")]),v._v("。 FIN=1 时，就表示此报文段的发送方的数据已经发送完毕，请求释放运输连接。")]),v._v(" "),t("h3",{attrs:{id:"流程-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#流程-2"}},[v._v("#")]),v._v(" 流程")]),v._v(" "),t("ol",[t("li",[v._v("在"),t("strong",[v._v("客户端断开链接")]),v._v("的时候，就会向服务端抛出一个 "),t("strong",[v._v("FIN=1")]),v._v(" 报文。当然，一起过去的还有序列号 "),t("strong",[v._v("seq=x")])]),v._v(" "),t("li",[t("strong",[v._v("服务器接收到断开报文")]),v._v("，痛不欲生，但还是接受了现实，回复了一个 "),t("strong",[v._v("ACK=1")]),v._v(" 的标识"),t("strong",[v._v("以示确认")]),v._v("。当然，一起过去的还有"),t("strong",[v._v("确认")]),v._v("码 "),t("strong",[v._v("ack=x+1")]),v._v("，以及它自己的"),t("strong",[v._v("序列号")]),v._v(" "),t("strong",[v._v("seq=y")])]),v._v(" "),t("li",[t("strong",[v._v("服务器确认发送完成")]),v._v("之后，向客户端抛出一个 "),t("strong",[v._v("FIN=1")]),v._v(" 报文，请求结束关系。当然啦，一起过去的还有"),t("strong",[v._v("确认标识 ACK=1")]),v._v("、"),t("strong",[v._v("确认码 ack=x+1")]),v._v("，以及自己的"),t("strong",[v._v("新序列号 seq=z")])]),v._v(" "),t("li",[t("strong",[v._v("客户端收到了服务端的断开请求")]),v._v("，向服务端抛出一个 "),t("strong",[v._v("ACK=1")]),v._v(" 的报文。当然啦，一起过去的还有确认码 "),t("strong",[v._v("ack=z+1")]),v._v("，确认标识 "),t("strong",[v._v("ACK=1")]),v._v("，以及自己的新序列号 "),t("strong",[v._v("seq=x+1")])])])])}),[],!1,null,null,null);_.default=r.exports}}]);